<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-extend="Orderline">
        <t t-jquery="li[t-attf-class*='orderline']" t-operation="replace">
            <t t-if="!line.discount_product">
                <li t-attf-class="orderline #{ line.selected ? 'selected' : '' } #{ line.promo ? 'promo' : '' }">
                    <span class="product-name">
                        <t t-esc="line.get_product().display_name"/>
                        <t t-if="line.get_product().tracking!=='none'">
                            <i t-attf-class="oe_link_icon fa fa-list oe_icon line-lot-icon #{line.has_valid_product_lot() ? 'oe_green' : 'oe_red' }"/>
                        </t>
                    </span>
                    <span class="price">
                        <t t-esc="widget.format_currency(line.get_display_price())"/>
                    </span>
                    <ul class="info-list">
                        <t t-if="line.get_quantity_str() !== '1' || line.selected ">
                            <li class="info">
                                <em>
                                    <t t-esc="line.get_quantity_str()" />
                                </em>
                                <t t-esc="line.get_unit().name" />
                                at
                                <t t-esc="widget.format_currency(line.get_unit_display_price(),'Product Price')" />
                                /
                                <t t-esc="line.get_unit().name" />
                            </li>
                        </t>
                        <t t-if="line.get_discount_str() !== '0'">
                            <li class="info">
                                With a
                                <em>
                                    <t t-esc="line.get_discount_str()" />%
                                </em>
                                discount
                            </li>
                        </t>
                    </ul>
                </li>
            </t>
            <t t-if="line.discount_product">
                <li t-attf-class="orderline #{ line.discount_product ? 'discount_product' : '' }">
                    <span class="product-name">
                        <t t-esc="line.get_product().display_name"/>
                    </span>
                    <span class="price">
                        <t t-esc="widget.format_currency(line.get_display_price())"/>
                    </span>
                </li>
            </t>
        </t>
    </t>
    <t t-extend="PosTicket">
        <t t-jquery="t[t-esc*='widget.format_currency(order.get_total_without_tax())']" t-operation="replace">
            <t t-if="widget.discount_product">
                <t t-esc="widget.format_currency(widget.subtotal)"/>
            </t>
            <t t-if="!widget.discount_product">
                <t t-esc="widget.format_currency(order.get_total_without_tax())"/>
            </t>
        </t>
        <t t-jquery="t[t-esc*='widget.format_currency(order.get_total_discount())']" t-operation="replace">
            <t t-if="widget.discount">
                <t t-esc="widget.format_currency(widget.discount)"/>
            </t>
            <t t-if="!widget.discount">
                <t t-esc="widget.format_currency(order.get_total_discount())"/>
            </t>
        </t>
    </t>

    <!--Promo category popup widget-->
    <t t-name="PromoCategoryPopupWidget">
        <div class="modal-dialog">
            <div class="popup promo-popup">
                <div class="header title">
                    <div>
                        <t t-if="widget.current_screen == 'products'">
                            <span class="promo-button button promo-home">
                                <i class='fa fa-home'></i>
                            </span>
                        </t>
                        <t t-esc="widget.options.title || '' " />
                        <div class="promo-search-box"></div>
                    </div>
                </div>
                <div class="promo_content">
                    <div class="category_popup">
                        <div class="promo_category_content">
                            <div class="promo-category-list">
                            </div>
                        </div>
                        <div class="promo_products_content">
                            <div class="promo-product-list">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="footer centered">
                </div>
            </div>
        </div>
    </t>

    <t t-name="PromoSearchBox">
        <span class='searchbox'>
            <input placeholder='Search Promo Product' />
            <span class='search-clear'></span>
        </span>
        <span class='searchbox'></span>
    </t>
</templates>
